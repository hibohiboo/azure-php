var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,i=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&s(e,o,t[o]);if(a)for(var o of a(t))r.call(t,o)&&s(e,o,t[o]);return e},l=(e,a)=>t(e,o(a));import{p,a as d,s as c,o as u,c as m,b as g,w as y,d as b,r as v,f,e as h,i as w,g as C,h as M,j as q,k as S,l as I,t as U,m as O,n as _,F as k,q as R,P as j}from"./vendor.72cd417c.js";const A={components:{Card:c}},L=y("data-v-1c406515");p("data-v-1c406515");const D=b(" Simple Card "),P=g("p",null," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed consequuntur error repudiandae numquam deserunt quisquam repellat libero asperiores earum nam nobis, culpa ratione quam perferendis esse, cupiditate neque quas! ",-1),N=g("img",{src:"https://www.primefaces.org/wp-content/uploads/2020/02/primefacesorg-primevue-2020.png",style:{height:"15rem"}},null,-1),V=b(" Advanced Card "),x=b(" Card subtitle "),B=g("p",null," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed consequuntur error repudiandae numquam deserunt quisquam repellat libero asperiores earum nam nobis, culpa ratione quam perferendis esse, cupiditate neque quas! ",-1);d();const T=L(((e,t,o,a,n,r)=>{const s=v("Card"),i=v("Button");return u(),m("div",null,[g(s,{style:{width:"25rem","margin-bottom":"2em"}},{title:L((()=>[D])),content:L((()=>[P])),_:1}),g(s,{style:{width:"25em"}},{header:L((()=>[N])),title:L((()=>[V])),subtitle:L((()=>[x])),content:L((()=>[B])),footer:L((()=>[g(i,{icon:"pi pi-check",label:"Save"}),g(i,{icon:"pi pi-times",label:"Cancel",class:"p-button-secondary",style:{"margin-left":"0.5em"}})])),_:1})])}));A.render=T,A.__scopeId="data-v-1c406515";const E={apiKey:"AIzaSyDHc2n_jZbvUoX_epWTLpRA_Yh0eUseons",authDomain:"trpg-scenario-support-tool.firebaseapp.com",projectId:"trpg-scenario-support-tool"};f.apps.length||f.initializeApp(E);const F=f.firestore(),z=f.auth(),H=f.firestore.FieldValue.serverTimestamp,J=Symbol("authStore"),$=()=>{const e=w(J);if(!e)throw new Error(`${J} is not provided`);return e},K=async(e,t)=>(async(e,t)=>{const o=F.collection("online-tool-rooms"),{id:a}=await o.doc();await Promise.all([o.doc(a).set(l(i({},e),{uid:t,createdAt:H()}))]);const n=(await o.doc(a).get()).data();if(!n)throw new Error("create failed newItem is empty");return l(i({},n),{id:a,createdAt:(r=n.createdAt,JSON.parse(JSON.stringify(r)))});var r})(e,t),W={title:"",displayModal:!1,isUpdate:!1},X=Symbol("roomStore"),Y=()=>{const e=w(X);if(!e)throw new Error(`${X} is not provided`);const{state:t}=$();return l(i({},e),{createRoom:async()=>{await K(e.room,t.uid),e.closeModal()},state:t})};var Z=C({components:{Dialog:M,Button:q,InputText:S,FileUpload:I},name:"RoomInputDialog",setup:()=>{const{room:e,state:t,createRoom:o,closeModal:a}=Y();return{closeModal:a,title:e.isUpdate?"編集":"登録",room:e,state:t,createRoom:o}}});const G=y("data-v-2ab27984");p("data-v-2ab27984");const Q=g("h5",null,"シナリオタイトル",-1),ee=g("h5",null,"ルーム画像",-1);d();const te=G(((e,t,o,a,n,r)=>{const s=v("InputText"),i=v("FileUpload"),l=v("Button"),p=v("Dialog");return u(),m(p,{header:e.title,visible:e.room.displayModal,"onUpdate:visible":t[2]||(t[2]=t=>e.room.displayModal=t),style:{width:"50vw"}},{footer:G((()=>[g(l,{label:"No",icon:"pi pi-times",onClick:e.closeModal,class:"p-button-text"},null,8,["onClick"]),g(l,{label:"登録",icon:"pi pi-check",onClick:e.createRoom,autofocus:""},null,8,["onClick"])])),default:G((()=>[g("div",null,[Q,g(s,{type:"text",modelValue:e.room.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.room.title=t)},null,8,["modelValue"]),g("span",{style:{marginLeft:".5em"}},U(e.room.title),5),ee,g(i,{mode:"basic",name:"demo",url:"http://localhost:8080/roomUpload",auto:!0})])])),_:1},8,["header","visible"])}));Z.render=te,Z.__scopeId="data-v-2ab27984";var oe=C({components:{RoomInputDialog:Z,CardSample:A,Button:q},name:"Main",props:{msg:{type:String,required:!0}},setup:()=>{const e=O(0),{signin:t,state:o}=$(),{openCreateModal:a}=Y();return t(),{count:e,openCreateModal:a,state:o}}});const ae=y("data-v-583f910a");p("data-v-583f910a");const ne=g("div",null,"テスト",-1);d();const re=ae(((e,t,o,a,n,r)=>{const s=v("Button"),i=v("RoomInputDialog"),l=v("CardSample");return u(),m(k,null,[ne,e.state.isLoggedin?(u(),m(s,{key:0,label:"登録",icon:"pi pi-external-link",onClick:e.openCreateModal},null,8,["onClick"])):_("",!0),g(i),g(l)],64)}));oe.render=re,oe.__scopeId="data-v-583f910a";var se=C({name:"App",components:{Main:oe}});se.render=function(e,t,o,a,n,r){const s=v("Main");return u(),m(s,{msg:"Hello Vue 3 + TypeScript + Vite"})},R(se).use(j).provide(J,(()=>{console.log("init authStore");const e=h({isLoggedin:!1,displayName:"",photoURL:"",uid:""});return z.onAuthStateChanged((t=>(t=>{var o,a;e.isLoggedin=!!t,t&&(e.displayName=null!=(o=t.displayName)?o:"",e.photoURL=null!=(a=t.photoURL)?a:"",e.uid=t.uid)})(t))),{state:e,signin:async()=>{await z.signInAnonymously()},signout:()=>z.signOut()}})()).provide(X,(()=>{const e=h(W);return{room:e,openCreateModal:()=>{e.displayModal=!0,e.isUpdate=!1},closeModal:()=>{e.displayModal=!1}}})()).mount("#app");
