var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(o,t,a)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a,i=(e,o)=>{for(var t in o||(o={}))n.call(o,t)&&s(e,t,o[t]);if(a)for(var t of a(o))r.call(o,t)&&s(e,t,o[t]);return e},l=(e,a)=>o(e,t(a));import{p as d,a as p,s as c,o as u,c as m,b as y,w as g,d as v,r as b,f,e as h,i as w,g as C,h as I,j as M,k as q,l as S,t as U,m as O,n as _,F as k,q as R,P as j}from"./vendor.72cd417c.js";const A={components:{Card:c}},L=g("data-v-1c406515");d("data-v-1c406515");const D=v(" Simple Card "),P=y("p",null," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed consequuntur error repudiandae numquam deserunt quisquam repellat libero asperiores earum nam nobis, culpa ratione quam perferendis esse, cupiditate neque quas! ",-1),N=y("img",{src:"https://www.primefaces.org/wp-content/uploads/2020/02/primefacesorg-primevue-2020.png",style:{height:"15rem"}},null,-1),V=v(" Advanced Card "),x=v(" Card subtitle "),B=y("p",null," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed consequuntur error repudiandae numquam deserunt quisquam repellat libero asperiores earum nam nobis, culpa ratione quam perferendis esse, cupiditate neque quas! ",-1);p();const T=L(((e,o,t,a,n,r)=>{const s=b("Card"),i=b("Button");return u(),m("div",null,[y(s,{style:{width:"25rem","margin-bottom":"2em"}},{title:L((()=>[D])),content:L((()=>[P])),_:1}),y(s,{style:{width:"25em"}},{header:L((()=>[N])),title:L((()=>[V])),subtitle:L((()=>[x])),content:L((()=>[B])),footer:L((()=>[y(i,{icon:"pi pi-check",label:"Save"}),y(i,{icon:"pi pi-times",label:"Cancel",class:"p-button-secondary",style:{"margin-left":"0.5em"}})])),_:1})])}));A.render=T,A.__scopeId="data-v-1c406515";const E={apiKey:"AIzaSyDHc2n_jZbvUoX_epWTLpRA_Yh0eUseons",authDomain:"trpg-scenario-support-tool.firebaseapp.com",projectId:"trpg-scenario-support-tool"};f.apps.length||f.initializeApp(E);const F=f.firestore(),$=f.auth(),z=f.firestore.FieldValue.serverTimestamp,H=Symbol("authStore"),J=()=>{const e=w(H);if(!e)throw new Error(`${H} is not provided`);return e},K=async(e,o,t)=>(async(e,o,t)=>{const a=F.collection("online-tool-rooms");await Promise.all([a.doc(e).set(l(i({},o),{uid:t,createdAt:z()}))]);const n=(await a.doc(e).get()).data();if(!n)throw new Error("create failed newItem is empty");return l(i({},n),{id:e,createdAt:(r=n.createdAt,JSON.parse(JSON.stringify(r)))});var r})(e,o,t),W=async()=>(async()=>{const e=F.collection("online-tool-rooms"),{id:o}=await e.doc();return o})(),X={title:"",roomId:"",displayModal:!1,isUpdate:!1},Y=Symbol("roomStore"),Z=()=>{const e=w(Y);if(!e)throw new Error(`${Y} is not provided`);const{state:o}=J();return l(i({},e),{createRoom:async()=>{await K(e.room.roomId,e.room,o.uid),e.closeModal()},state:o})};var G=C({components:{Dialog:I,Button:M,InputText:q,FileUpload:S},name:"RoomInputDialog",setup:()=>{const{room:e,state:o,createRoom:t,closeModal:a}=Z();return{closeModal:a,title:e.isUpdate?"編集":"登録",room:e,state:o,createRoom:t}}});const Q=g("data-v-30745a98");d("data-v-30745a98");const ee=y("h5",null,"シナリオタイトル",-1),oe=y("h5",null,"ルーム画像",-1);p();const te=Q(((e,o,t,a,n,r)=>{const s=b("InputText"),i=b("FileUpload"),l=b("Button"),d=b("Dialog");return u(),m(d,{header:e.title,visible:e.room.displayModal,"onUpdate:visible":o[2]||(o[2]=o=>e.room.displayModal=o),style:{width:"50vw"}},{footer:Q((()=>[y(l,{label:"No",icon:"pi pi-times",onClick:e.closeModal,class:"p-button-text"},null,8,["onClick"]),y(l,{label:"登録",icon:"pi pi-check",onClick:e.createRoom,autofocus:""},null,8,["onClick"])])),default:Q((()=>[y("div",null,[ee,y(s,{type:"text",modelValue:e.room.title,"onUpdate:modelValue":o[1]||(o[1]=o=>e.room.title=o)},null,8,["modelValue"]),y("span",{style:{marginLeft:".5em"}},U(e.room.title),5),oe,y(i,{mode:"basic",name:"demo",url:`http://localhost:8080/roomUpload/${e.state.uid}/${e.room.roomId}`,auto:!0},null,8,["url"])])])),_:1},8,["header","visible"])}));G.render=te,G.__scopeId="data-v-30745a98";var ae=C({components:{RoomInputDialog:G,CardSample:A,Button:M},name:"Main",props:{msg:{type:String,required:!0}},setup:()=>{const e=O(0),{signin:o,state:t}=J(),{openCreateModal:a}=Z();return o(),{count:e,openCreateModal:a,state:t}}});const ne=g("data-v-583f910a");d("data-v-583f910a");const re=y("div",null,"テスト",-1);p();const se=ne(((e,o,t,a,n,r)=>{const s=b("Button"),i=b("RoomInputDialog"),l=b("CardSample");return u(),m(k,null,[re,e.state.isLoggedin?(u(),m(s,{key:0,label:"登録",icon:"pi pi-external-link",onClick:e.openCreateModal},null,8,["onClick"])):_("",!0),y(i),y(l)],64)}));ae.render=se,ae.__scopeId="data-v-583f910a";var ie=C({name:"App",components:{Main:ae}});ie.render=function(e,o,t,a,n,r){const s=b("Main");return u(),m(s,{msg:"Hello Vue 3 + TypeScript + Vite"})},R(ie).use(j).provide(H,(()=>{console.log("init authStore");const e=h({isLoggedin:!1,displayName:"",photoURL:"",uid:""});return $.onAuthStateChanged((o=>(o=>{var t,a;e.isLoggedin=!!o,o&&(e.displayName=null!=(t=o.displayName)?t:"",e.photoURL=null!=(a=o.photoURL)?a:"",e.uid=o.uid)})(o))),{state:e,signin:async()=>{await $.signInAnonymously()},signout:()=>$.signOut()}})()).provide(Y,(()=>{const e=h(X);return{room:e,openCreateModal:async()=>{e.displayModal=!0,e.isUpdate=!1,e.roomId=await W()},closeModal:()=>{e.displayModal=!1}}})()).mount("#app");
